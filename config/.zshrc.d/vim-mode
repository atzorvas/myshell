set -o vi
bindkey -v

bindkey '^a' beginning-of-line
bindkey '^e' end-of-line
bindkey '^k' kill-line
bindkey '^w' backward-kill-word

bindkey '^r' history-incremental-search-backward
bindkey '^s' history-incremental-search-forward
bindkey '^P' up-history
bindkey '^N' down-history
bindkey '^[[A' up-line-or-search
bindkey '^[[B' down-line-or-search
bindkey -M vicmd 'k' up-line-or-search
bindkey -M vicmd 'j' down-line-or-search
bindkey -M vicmd '/' history-incremental-pattern-search-backward # default is vi-history-search-backward
bindkey -M vicmd '?' vi-history-search-backward # default is vi-history-search-forward

autoload -Uz edit-command-line
zle -N edit-command-line
bindkey -M vicmd 'v' edit-command-line